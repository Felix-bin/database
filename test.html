<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>船舶作业装备租赁与港口仓储管理系统</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #0056b3; /* 海事蓝 */
            --secondary-color: #004494;
            --accent-color: #00a8e8;
            --bg-color: #f4f7f6;
            --text-color: #333;
            --sidebar-width: 260px;
            --header-height: 60px;
            --card-shadow: 0 2px 10px rgba(0,0,0,0.05);
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif; }
        
        body { background-color: var(--bg-color); color: var(--text-color); display: flex; height: 100vh; overflow: hidden; }

        /* Sidebar Styling */
        .sidebar {
            width: var(--sidebar-width);
            background-color: #1a2530;
            color: white;
            display: flex;
            flex-direction: column;
            transition: all 0.3s;
        }
        .logo {
            height: var(--header-height);
            display: flex;
            align-items: center;
            padding: 0 20px;
            font-size: 18px;
            font-weight: bold;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            background-color: #131b24;
        }
        .logo i { margin-right: 10px; color: var(--accent-color); }
        .menu { flex: 1; padding-top: 20px; }
        .menu-item {
            padding: 15px 25px;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            align-items: center;
            color: #aeb9c6;
            text-decoration: none;
        }
        .menu-item:hover, .menu-item.active {
            background-color: var(--primary-color);
            color: white;
            border-left: 4px solid var(--accent-color);
        }
        .menu-item i { margin-right: 12px; width: 20px; text-align: center; }

        /* Main Content Styling */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Header Styling */
        header {
            height: var(--header-height);
            background: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 30px;
            box-shadow: var(--card-shadow);
            z-index: 10;
        }
        .user-info { display: flex; align-items: center; gap: 15px; }
        .user-avatar { width: 35px; height: 35px; background: #ddd; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #666; }
        
        /* Dashboard Content */
        .content-area {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
        }
        .page-title { margin-bottom: 20px; font-size: 24px; color: #2c3e50; }

        /* Cards & Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .stat-info h3 { font-size: 28px; margin-bottom: 5px; color: var(--primary-color); }
        .stat-info p { font-size: 14px; color: #888; }
        .stat-icon { font-size: 30px; opacity: 0.2; }

        /* Tables */
        .table-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
        }
        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: 0.2s;
        }
        .btn-primary { background: var(--primary-color); color: white; }
        .btn-primary:hover { background: var(--secondary-color); }
        .btn-outline { border: 1px solid #ddd; background: transparent; color: #666; }
        
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px 15px; text-align: left; border-bottom: 1px solid #eee; }
        th { background-color: #f8f9fa; color: #555; font-weight: 600; }
        tr:hover { background-color: #f1f7fd; }

        /* Status Badges */
        .badge { padding: 4px 8px; border-radius: 12px; font-size: 12px; font-weight: 500; }
        .badge-success { background: #d4edda; color: #155724; } /* 在库 */
        .badge-warning { background: #fff3cd; color: #856404; } /* 租赁中 */
        .badge-danger { background: #f8d7da; color: #721c24; } /* 维修中 */
        .badge-info { background: #d1ecf1; color: #0c5460; } /* 待结算 */

        /* Tabs Logic (Hidden Sections) */
        .module-section { display: none; animation: fadeIn 0.4s; }
        .module-section.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Flow Process Steps (Visual) */
        .process-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
        }
        .step { text-align: center; position: relative; flex: 1; }
        .step i { width: 40px; height: 40px; background: #e9ecef; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px; color: #6c757d; }
        .step.active i { background: var(--primary-color); color: white; }
        .step::after { content: ''; position: absolute; top: 20px; right: -50%; width: 100%; height: 2px; background: #e9ecef; z-index: 0; }
        .step:last-child::after { display: none; }
        .step p { font-size: 13px; font-weight: 600; color: #555; }

        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }
        .modal-overlay.active { display: block; }
        
        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 8px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            z-index: 1000;
            width: 90%;
            max-width: 600px;
            max-height: 85vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        .modal.active { display: flex; }
        .modal.modal-large { max-width: 900px; }
        
        .modal-header {
            padding: 20px 25px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f8f9fa;
        }
        .modal-header h3 { margin: 0; font-size: 18px; color: var(--primary-color); }
        .modal-close {
            font-size: 28px;
            cursor: pointer;
            color: #999;
            line-height: 1;
        }
        .modal-close:hover { color: #333; }
        
        .modal-body {
            padding: 25px;
            overflow-y: auto;
            flex: 1;
        }
        
        .modal-footer {
            padding: 15px 25px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            background: #f8f9fa;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #555;
            font-size: 14px;
        }
        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.2s;
        }
        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        .form-row {
            display: flex;
            gap: 15px;
        }

        /* Detail View Styles */
        .detail-section {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        .detail-section:last-child { border-bottom: none; }
        .detail-section h4 {
            margin-bottom: 15px;
            color: var(--primary-color);
            font-size: 16px;
        }
        .detail-row {
            display: flex;
            padding: 8px 0;
            font-size: 14px;
        }
        .detail-label {
            font-weight: 600;
            color: #666;
            width: 140px;
            flex-shrink: 0;
        }

        /* Code Block Styles */
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e1e4e8;
            border-radius: 4px;
            padding: 15px;
            overflow-x: auto;
        }
        .code-block pre {
            margin: 0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
            color: #24292e;
        }
        code {
            font-family: 'Courier New', monospace;
            background: #f1f3f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 13px;
        }

        /* Pagination */
        .pagination {
            display: flex;
            gap: 5px;
        }
        .pagination .btn.active {
            background: var(--primary-color);
            color: white;
        }

        /* Animation */
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translate(-50%, -48%); }
            to { opacity: 1; transform: translate(-50%, -50%); }
        }
        .modal.active { animation: modalFadeIn 0.3s ease; }

    </style>
</head>
<body>

    <div class="sidebar">
        <div class="logo">
            <i class="fas fa-anchor"></i> 港口装备管理系统
        </div>
        <div class="menu">
            <div class="menu-item active" onclick="showModule('dashboard', this)">
                <i class="fas fa-tachometer-alt"></i> 工作台
            </div>
            <div class="menu-item" onclick="showModule('inventory', this)">
                <i class="fas fa-boxes"></i> 仓储与库存
            </div>
            <div class="menu-item" onclick="showModule('leasing', this)">
                <i class="fas fa-file-contract"></i> 租赁与出库
            </div>
            <div class="menu-item" onclick="showModule('return', this)">
                <i class="fas fa-clipboard-check"></i> 归还与检验
            </div>
            <div class="menu-item" onclick="showModule('finance', this)">
                <i class="fas fa-coins"></i> 费用结算
            </div>
            <div class="menu-item" onclick="showModule('settings', this)">
                <i class="fas fa-cog"></i> 系统设置
            </div>
        </div>
    </div>

    <div class="main-content">
        <header>
            <h3 id="header-title">工作台概览</h3>
            <div class="user-info">
                <i class="far fa-bell" style="cursor: pointer;"></i>
                <span>操作员：张工</span>
                <div class="user-avatar"><i class="fas fa-user"></i></div>
            </div>
        </header>

        <div class="content-area">

            <div id="dashboard" class="module-section active">
                <div class="dashboard-grid">
                    <div class="stat-card" style="cursor: pointer;" onclick="showModal('chartView')">
                        <div class="stat-info">
                            <h3>124</h3>
                            <p>在库设备 (件)</p>
                            <small style="color: var(--success); font-size: 12px;">▲ 5% vs上月</small>
                        </div>
                        <div class="stat-icon"><i class="fas fa-box"></i></div>
                    </div>
                    <div class="stat-card" style="cursor: pointer;" onclick="showModule('leasing', document.querySelectorAll('.menu-item')[2])">
                        <div class="stat-info">
                            <h3>8</h3>
                            <p>今日待出库</p>
                            <small style="color: var(--warning); font-size: 12px;">需要处理</small>
                        </div>
                        <div class="stat-icon"><i class="fas fa-truck-loading"></i></div>
                    </div>
                    <div class="stat-card" style="cursor: pointer;">
                        <div class="stat-info">
                            <h3>15</h3>
                            <p>航次运行中</p>
                            <small style="color: #666; font-size: 12px;">涉及设备 38 件</small>
                        </div>
                        <div class="stat-icon"><i class="fas fa-ship"></i></div>
                    </div>
                    <div class="stat-card" style="cursor: pointer;" onclick="showModule('finance', document.querySelectorAll('.menu-item')[4])">
                        <div class="stat-info">
                            <h3>¥ 45W</h3>
                            <p>本月待结算</p>
                            <small style="color: var(--danger); font-size: 12px;">15笔逾期</small>
                        </div>
                        <div class="stat-icon"><i class="fas fa-yen-sign"></i></div>
                    </div>
                </div>

                <!-- 数据统计图表区 -->
                <div class="dashboard-grid" style="grid-template-columns: 2fr 1fr; margin-bottom: 20px;">
                    <div class="table-container">
                        <div class="table-header">
                            <h4><i class="fas fa-chart-line"></i> 本月收入趋势 (通过视图查询)</h4>
                            <button class="btn btn-outline" onclick="showModal('chartView')"><i class="fas fa-expand"></i> 查看详情</button>
                        </div>
                        <div style="padding: 20px; text-align: center;">
                            <svg width="100%" height="200" style="background: #f8f9fa; border-radius: 4px;">
                                <!-- 简单的折线图模拟 -->
                                <polyline points="50,150 100,120 150,100 200,130 250,80 300,90 350,60 400,50" 
                                    fill="none" stroke="var(--primary-color)" stroke-width="3"/>
                                <text x="50" y="180" font-size="12" fill="#666">10/1</text>
                                <text x="150" y="180" font-size="12" fill="#666">10/10</text>
                                <text x="250" y="180" font-size="12" fill="#666">10/20</text>
                                <text x="350" y="180" font-size="12" fill="#666">10/30</text>
                                <text x="10" y="60" font-size="12" fill="#666">¥50k</text>
                                <text x="10" y="120" font-size="12" fill="#666">¥30k</text>
                                <text x="10" y="155" font-size="12" fill="#666">¥10k</text>
                            </svg>
                            <p style="margin-top: 10px; font-size: 13px; color: #666;">SQL: SELECT DATE(created_at), SUM(amount) FROM billing GROUP BY DATE(created_at)</p>
                        </div>
                    </div>

                    <div class="table-container">
                        <div class="table-header">
                            <h4><i class="fas fa-pie-chart"></i> 设备类型分布</h4>
                        </div>
                        <div style="padding: 20px;">
                            <div style="margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span style="font-size: 13px;">起重配件</span>
                                    <span style="font-size: 13px; font-weight: bold;">42%</span>
                                </div>
                                <div style="height: 8px; background: #e9ecef; border-radius: 4px; overflow: hidden;">
                                    <div style="width: 42%; height: 100%; background: var(--primary-color);"></div>
                                </div>
                            </div>
                            <div style="margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span style="font-size: 13px;">流体设备</span>
                                    <span style="font-size: 13px; font-weight: bold;">28%</span>
                                </div>
                                <div style="height: 8px; background: #e9ecef; border-radius: 4px; overflow: hidden;">
                                    <div style="width: 28%; height: 100%; background: var(--accent-color);"></div>
                                </div>
                            </div>
                            <div style="margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span style="font-size: 13px;">固缚索具</span>
                                    <span style="font-size: 13px; font-weight: bold;">18%</span>
                                </div>
                                <div style="height: 8px; background: #e9ecef; border-radius: 4px; overflow: hidden;">
                                    <div style="width: 18%; height: 100%; background: var(--warning);"></div>
                                </div>
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span style="font-size: 13px;">其他</span>
                                    <span style="font-size: 13px; font-weight: bold;">12%</span>
                                </div>
                                <div style="height: 8px; background: #e9ecef; border-radius: 4px; overflow: hidden;">
                                    <div style="width: 12%; height: 100%; background: var(--success);"></div>
                                </div>
                            </div>
                            <p style="margin-top: 15px; font-size: 12px; color: #666;">数据来源：v_equipment_category_stats</p>
                        </div>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-header">
                        <h4><i class="fas fa-exclamation-circle" style="color:var(--warning)"></i> 预警：即将到期归还设备</h4>
                        <button class="btn btn-outline" onclick="alert('已刷新触发器预警数据')"><i class="fas fa-sync"></i> 刷新</button>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>设备编号</th>
                                <th>设备名称</th>
                                <th>租赁方 (船舶/公司)</th>
                                <th>航次号</th>
                                <th>预计归还日</th>
                                <th>状态</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>EQ-2023001</td>
                                <td>重型吊索组</td>
                                <td>远洋荣耀号 (Ocean Glory)</td>
                                <td>V-9082</td>
                                <td style="color: red; font-weight: bold;">2023-10-25 (今日)</td>
                                <td><span class="badge badge-warning">租赁中</span></td>
                                <td><button class="btn btn-primary" style="padding: 4px 8px; font-size: 12px;" onclick="showModule('return', document.querySelectorAll('.menu-item')[3])">处理归还</button></td>
                            </tr>
                            <tr>
                                <td>EQ-2023045</td>
                                <td>集装箱叉车 (3T)</td>
                                <td>港务三区</td>
                                <td>-</td>
                                <td style="color: orange;">2023-10-26 (明天)</td>
                                <td><span class="badge badge-warning">租赁中</span></td>
                                <td><button class="btn btn-outline" style="padding: 4px 8px; font-size: 12px;" onclick="alert('已发送归还提醒')">发送提醒</button></td>
                            </tr>
                            <tr>
                                <td>EQ-2023078</td>
                                <td>防护栏板 (20米)</td>
                                <td>中远海运</td>
                                <td>COSCO-442</td>
                                <td>2023-10-27</td>
                                <td><span class="badge badge-warning">租赁中</span></td>
                                <td><button class="btn btn-outline" style="padding: 4px 8px; font-size: 12px;">查看详情</button></td>
                            </tr>
                        </tbody>
                    </table>
                    <p style="margin-top: 10px; font-size: 12px; color: #999;"><i class="fas fa-info-circle"></i> 该数据由触发器 trg_return_warning 自动监控生成</p>
                </div>
            </div>

            <div id="inventory" class="module-section">
                <div class="process-steps">
                    <div class="step active"><i class="fas fa-plus"></i><p>采购入库</p></div>
                    <div class="step active"><i class="fas fa-barcode"></i><p>编码贴标</p></div>
                    <div class="step active"><i class="fas fa-warehouse"></i><p>库位分配</p></div>
                    <div class="step"><i class="fas fa-tools"></i><p>定期维保</p></div>
                </div>

                <div class="table-container">
                    <div class="table-header">
                        <div>
                            <button class="btn btn-primary" onclick="showModal('addEquipment')"><i class="fas fa-plus"></i> 新设备入库</button>
                            <button class="btn btn-outline" onclick="showModal('batchImport')"><i class="fas fa-file-upload"></i> 批量导入</button>
                            <button class="btn btn-outline" onclick="alert('库存统计视图已刷新')"><i class="fas fa-sync"></i> 刷新库存视图</button>
                        </div>
                        <div>
                            <input type="text" placeholder="搜索设备名称/编号..." style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;" onkeyup="simulateDatabaseOperation('query')">
                            <button class="btn btn-outline" onclick="showModal('inventoryFilter')"><i class="fas fa-filter"></i> 高级筛选</button>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th><input type="checkbox"></th>
                                <th>设备编号</th>
                                <th>名称/型号</th>
                                <th>类别</th>
                                <th>存放库位</th>
                                <th>入库日期</th>
                                <th>当前状态</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input type="checkbox"></td>
                                <td>CR-5001</td>
                                <td>门座式起重机配件包</td>
                                <td>起重配件</td>
                                <td>A区-01-04</td>
                                <td>2023-08-10</td>
                                <td><span class="badge badge-success">在库</span></td>
                                <td>
                                    <a href="#" onclick="showModal('equipmentDetail')">详情</a> | 
                                    <a href="#" onclick="showModal('editEquipment')">编辑</a> | 
                                    <a href="#" onclick="simulateDatabaseOperation('update')">移库</a>
                                </td>
                            </tr>
                            <tr>
                                <td><input type="checkbox"></td>
                                <td>FL-2002</td>
                                <td>重油输送泵</td>
                                <td>流体设备</td>
                                <td>B区-02-11</td>
                                <td>2023-09-01</td>
                                <td><span class="badge badge-danger">维修中</span></td>
                                <td>
                                    <a href="#" onclick="showModal('equipmentDetail')">详情</a> | 
                                    <a href="#" onclick="showModal('maintenanceRecord')">维保记录</a>
                                </td>
                            </tr>
                             <tr>
                                <td><input type="checkbox"></td>
                                <td>CN-1022</td>
                                <td>绑扎杆 (100根/组)</td>
                                <td>固缚索具</td>
                                <td>-</td>
                                <td>2023-01-15</td>
                                <td><span class="badge badge-warning">已出库</span></td>
                                <td>
                                    <a href="#" onclick="showModal('equipmentDetail')">详情</a> | 
                                    <a href="#" onclick="showModal('trackingInfo')">追踪</a>
                                </td>
                            </tr>
                            <tr>
                                <td><input type="checkbox"></td>
                                <td>HY-3305</td>
                                <td>液压千斤顶 (50T)</td>
                                <td>液压工具</td>
                                <td>C区-03-08</td>
                                <td>2023-10-01</td>
                                <td><span class="badge badge-success">在库</span></td>
                                <td>
                                    <a href="#" onclick="showModal('equipmentDetail')">详情</a> | 
                                    <a href="#" onclick="showModal('editEquipment')">编辑</a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div style="margin-top: 15px; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <button class="btn btn-outline" style="padding: 5px 10px;" onclick="simulateDatabaseOperation('delete')">批量删除</button>
                            <button class="btn btn-outline" style="padding: 5px 10px;">批量导出</button>
                        </div>
                        <div>
                            <span style="color: #666; font-size: 14px; margin-right: 15px;">显示 1-10 / 共 124 条</span>
                            <div class="pagination" style="display: inline-flex;">
                                <button class="btn btn-outline" style="padding: 5px 10px;">上一页</button>
                                <button class="btn btn-outline active" style="padding: 5px 10px;">1</button>
                                <button class="btn btn-outline" style="padding: 5px 10px;">2</button>
                                <button class="btn btn-outline" style="padding: 5px 10px;">3</button>
                                <button class="btn btn-outline" style="padding: 5px 10px;">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="leasing" class="module-section">
                <div class="table-container" style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 15px; color: var(--primary-color);"><i class="fas fa-plus-circle"></i> 新建租赁申请</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 15px;">
                        <div>
                            <label style="font-size: 12px; color: #666;">申请船舶/客户</label>
                            <input type="text" value="长宏海运 - 远大号" class="form-input" style="width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ddd;" list="customerList">
                            <datalist id="customerList">
                                <option value="长宏海运 - 远大号">
                                <option value="远洋荣耀号">
                                <option value="太平洋航运">
                                <option value="马士基物流">
                            </datalist>
                        </div>
                        <div>
                            <label style="font-size: 12px; color: #666;">航次号 (Voyage No.)</label>
                            <input type="text" value="CH-20231024" class="form-input" style="width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ddd;">
                        </div>
                        <div>
                            <label style="font-size: 12px; color: #666;">预计使用时间</label>
                            <input type="date" class="form-input" style="width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ddd;">
                        </div>
                         <div style="display: flex; align-items: flex-end;">
                            <button class="btn btn-primary" style="width: 100%;" onclick="showModal('selectEquipment')"><i class="fas fa-plus"></i> 创建订单并选配设备</button>
                        </div>
                    </div>
                    <p style="margin-top: 10px; font-size: 12px; color: #999;"><i class="fas fa-info-circle"></i> 系统将自动执行触发器：trg_create_lease_order</p>
                </div>

                <div class="table-container">
                    <div class="table-header">
                        <h4>租赁订单列表</h4>
                        <div>
                            <button class="btn btn-outline" onclick="showModal('leaseFilter')"><i class="fas fa-filter"></i> 筛选</button>
                            <button class="btn btn-outline"><i class="fas fa-file-export"></i> 导出</button>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>订单号</th>
                                <th>申请单位</th>
                                <th>航次号</th>
                                <th>包含设备数</th>
                                <th>起租时间</th>
                                <th>预计归还</th>
                                <th>流程状态</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>ORD-2023102401</td>
                                <td>太平洋航运</td>
                                <td>PC-9901</td>
                                <td><a href="#" onclick="showModal('orderEquipmentList')" style="color: var(--primary-color); font-weight: bold;">12 件</a></td>
                                <td>2023-10-25</td>
                                <td>2023-11-10</td>
                                <td><span class="badge badge-info">待提货</span></td>
                                <td>
                                    <button class="btn btn-primary" style="padding: 4px 8px; font-size: 12px;" onclick="showModal('checkoutProcess')">办理出库</button>
                                    <button class="btn btn-outline" style="padding: 4px 8px; font-size: 12px;" onclick="showModal('orderDetail')">详情</button>
                                </td>
                            </tr>
                            <tr>
                                <td>ORD-2023102205</td>
                                <td>马士基物流</td>
                                <td>MSK-882</td>
                                <td><a href="#" onclick="showModal('orderEquipmentList')" style="color: var(--primary-color); font-weight: bold;">5 件</a></td>
                                <td>2023-10-22</td>
                                <td>2023-11-05</td>
                                <td><span class="badge badge-warning">航次执行中</span></td>
                                <td>
                                    <button class="btn btn-outline" style="padding: 4px 8px; font-size: 12px;" onclick="showModal('orderDetail')">详情</button>
                                    <button class="btn btn-outline" style="padding: 4px 8px; font-size: 12px;" onclick="showModal('trackingInfo')">追踪</button>
                                </td>
                            </tr>
                            <tr>
                                <td>ORD-2023101801</td>
                                <td>中远海运</td>
                                <td>COSCO-777</td>
                                <td><a href="#" onclick="showModal('orderEquipmentList')" style="color: var(--primary-color); font-weight: bold;">8 件</a></td>
                                <td>2023-10-18</td>
                                <td>2023-11-02</td>
                                <td><span class="badge badge-warning">航次执行中</span></td>
                                <td>
                                    <button class="btn btn-outline" style="padding: 4px 8px; font-size: 12px;" onclick="showModal('orderDetail')">详情</button>
                                    <button class="btn btn-outline" style="padding: 4px 8px; font-size: 12px;">催还</button>
                                </td>
                            </tr>
                            <tr>
                                <td>ORD-2023101205</td>
                                <td>长宏海运</td>
                                <td>CH-9876</td>
                                <td><a href="#" onclick="showModal('orderEquipmentList')" style="color: var(--primary-color); font-weight: bold;">15 件</a></td>
                                <td>2023-10-12</td>
                                <td>2023-10-28</td>
                                <td><span class="badge badge-success">已完结</span></td>
                                <td>
                                    <button class="btn btn-outline" style="padding: 4px 8px; font-size: 12px;" onclick="showModal('orderDetail')">详情</button>
                                    <button class="btn btn-outline" style="padding: 4px 8px; font-size: 12px;">查看账单</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div style="margin-top: 15px; display: flex; justify-content: space-between; align-items: center;">
                        <span style="color: #666; font-size: 14px;">显示 1-10 / 共 68 条</span>
                        <div class="pagination">
                            <button class="btn btn-outline" style="padding: 5px 10px;">上一页</button>
                            <button class="btn btn-outline active" style="padding: 5px 10px;">1</button>
                            <button class="btn btn-outline" style="padding: 5px 10px;">2</button>
                            <button class="btn btn-outline" style="padding: 5px 10px;">3</button>
                            <button class="btn btn-outline" style="padding: 5px 10px;">下一页</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="return" class="module-section">
                <div class="dashboard-grid" style="grid-template-columns: 2fr 1fr; margin-bottom: 20px;">
                    <div class="table-container">
                        <div class="table-header">
                            <h4><i class="fas fa-clipboard-check"></i> 归还待检列表</h4>
                            <button class="btn btn-outline" onclick="showModal('returnFilter')"><i class="fas fa-filter"></i> 筛选</button>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>归还单号</th>
                                    <th>来源订单</th>
                                    <th>航次号</th>
                                    <th>设备数量</th>
                                    <th>归还时间</th>
                                    <th>状态</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>RET-0091</td>
                                    <td>ORD-2023091501</td>
                                    <td>V-9082</td>
                                    <td><a href="#" onclick="showModal('returnEquipmentList')" style="color: var(--primary-color); font-weight: bold;">3 件</a></td>
                                    <td>2023-10-25 10:30</td>
                                    <td><span class="badge badge-warning">待质检</span></td>
                                    <td><button class="btn btn-primary" style="padding: 4px 8px; font-size: 12px;" onclick="showModal('inspectionPanel')">开始质检</button></td>
                                </tr>
                                <tr>
                                    <td>RET-0088</td>
                                    <td>ORD-2023091201</td>
                                    <td>CH-7766</td>
                                    <td><a href="#" onclick="showModal('returnEquipmentList')" style="color: var(--primary-color); font-weight: bold;">7 件</a></td>
                                    <td>2023-10-24 14:20</td>
                                    <td><span class="badge badge-info">质检中</span></td>
                                    <td><button class="btn btn-outline" style="padding: 4px 8px; font-size: 12px;" onclick="showModal('inspectionPanel')">继续质检</button></td>
                                </tr>
                                <tr>
                                    <td>RET-0085</td>
                                    <td>ORD-2023090801</td>
                                    <td>MSK-554</td>
                                    <td><a href="#" onclick="showModal('returnEquipmentList')" style="color: var(--primary-color); font-weight: bold;">5 件</a></td>
                                    <td>2023-10-23 09:15</td>
                                    <td><span class="badge badge-success">已入库</span></td>
                                    <td><button class="btn btn-outline" style="padding: 4px 8px; font-size: 12px;" onclick="showModal('returnDetail')">查看详情</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <p style="margin-top: 10px; font-size: 12px; color: #999;"><i class="fas fa-database"></i> 数据查询：v_return_inspection_queue (视图)</p>
                    </div>
                    <div class="table-container" style="border-left: 4px solid var(--accent-color);">
                        <h4><i class="fas fa-clipboard-list"></i> 快速质检录入</h4>
                        <div style="margin-top: 15px;">
                            <p style="font-size: 13px; margin-bottom: 10px; color: #666;"><i class="fas fa-info-circle"></i> 选择归还单开始质检</p>
                            <p style="font-size: 14px; margin-bottom: 5px;"><strong>当前设备：</strong>重型吊索组</p>
                            <p style="font-size: 14px; margin-bottom: 15px;"><strong>编号：</strong>EQ-2023001</p>
                            
                            <label style="display: block; margin-bottom: 5px; font-size: 13px;">外观状况</label>
                            <select class="form-control" style="margin-bottom: 10px;">
                                <option>完好</option>
                                <option>轻微磨损</option>
                                <option>严重损坏</option>
                            </select>

                            <label style="display: block; margin-bottom: 5px; font-size: 13px;">功能测试</label>
                            <div style="margin-bottom: 15px;">
                                <label style="margin-right: 15px; font-weight: normal;"><input type="radio" name="func" checked> 通过</label>
                                <label style="font-weight: normal;"><input type="radio" name="func"> 故障</label>
                            </div>

                            <label style="display: block; margin-bottom: 5px; font-size: 13px;">需维修</label>
                            <div style="margin-bottom: 15px;">
                                <label style="margin-right: 15px; font-weight: normal;"><input type="checkbox"> 是</label>
                            </div>

                            <label style="display: block; margin-bottom: 5px; font-size: 13px;">处理意见</label>
                            <textarea class="form-control" rows="3" style="margin-bottom: 10px;"></textarea>
                            
                            <button class="btn btn-primary" style="width: 100%;" onclick="alert('✓ 质检完成！\n- 设备状态已更新为：在库\n- 账单已自动生成（触发器：trg_auto_billing）\n- 库位已分配：A区-01-04')">确认入库并生成账单</button>
                            <p style="margin-top: 10px; font-size: 11px; color: #999; text-align: center;">将触发：trg_return_complete + sp_generate_bill</p>
                        </div>
                    </div>
                </div>

                <!-- 质检统计 -->
                <div class="dashboard-grid" style="grid-template-columns: repeat(4, 1fr); margin-bottom: 20px;">
                    <div class="stat-card">
                        <div class="stat-info">
                            <h3>15</h3>
                            <p>待质检设备</p>
                        </div>
                        <div class="stat-icon"><i class="fas fa-clock"></i></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-info">
                            <h3>8</h3>
                            <p>质检中</p>
                        </div>
                        <div class="stat-icon"><i class="fas fa-spinner"></i></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-info">
                            <h3>142</h3>
                            <p>本月已归还</p>
                        </div>
                        <div class="stat-icon"><i class="fas fa-check-circle"></i></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-info">
                            <h3>5</h3>
                            <p>需维修设备</p>
                        </div>
                        <div class="stat-icon" style="color: var(--danger);"><i class="fas fa-wrench"></i></div>
                    </div>
                </div>

                <!-- 质检历史 -->
                <div class="table-container">
                    <div class="table-header">
                        <h4><i class="fas fa-history"></i> 质检历史记录</h4>
                        <button class="btn btn-outline"><i class="fas fa-file-export"></i> 导出报告</button>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>归还单号</th>
                                <th>设备编号</th>
                                <th>设备名称</th>
                                <th>质检时间</th>
                                <th>质检员</th>
                                <th>质检结果</th>
                                <th>维修费用</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>RET-0085</td>
                                <td>EQ-2023078</td>
                                <td>防护栏板 (20米)</td>
                                <td>2023-10-23 10:30</td>
                                <td>张质检</td>
                                <td><span class="badge badge-success">合格</span></td>
                                <td>¥ 0.00</td>
                                <td><button class="btn btn-outline" style="padding: 4px 8px; font-size: 12px;" onclick="showModal('inspectionReport')">查看报告</button></td>
                            </tr>
                            <tr>
                                <td>RET-0083</td>
                                <td>FL-2002</td>
                                <td>重油输送泵</td>
                                <td>2023-10-22 14:20</td>
                                <td>李质检</td>
                                <td><span class="badge badge-warning">需维修</span></td>
                                <td>¥ 2,500.00</td>
                                <td><button class="btn btn-outline" style="padding: 4px 8px; font-size: 12px;" onclick="showModal('inspectionReport')">查看报告</button></td>
                            </tr>
                            <tr>
                                <td>RET-0080</td>
                                <td>HY-3305</td>
                                <td>液压千斤顶 (50T)</td>
                                <td>2023-10-21 09:15</td>
                                <td>王质检</td>
                                <td><span class="badge badge-success">合格</span></td>
                                <td>¥ 0.00</td>
                                <td><button class="btn btn-outline" style="padding: 4px 8px; font-size: 12px;" onclick="showModal('inspectionReport')">查看报告</button></td>
                            </tr>
                        </tbody>
                    </table>
                    <div style="margin-top: 15px; display: flex; justify-content: space-between; align-items: center;">
                        <span style="color: #666; font-size: 14px;">显示 1-10 / 共 234 条</span>
                        <div class="pagination">
                            <button class="btn btn-outline" style="padding: 5px 10px;">上一页</button>
                            <button class="btn btn-outline active" style="padding: 5px 10px;">1</button>
                            <button class="btn btn-outline" style="padding: 5px 10px;">2</button>
                            <button class="btn btn-outline" style="padding: 5px 10px;">3</button>
                            <button class="btn btn-outline" style="padding: 5px 10px;">下一页</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="finance" class="module-section">
                <div class="dashboard-grid" style="grid-template-columns: repeat(3, 1fr); margin-bottom: 20px;">
                    <div class="stat-card">
                        <div class="stat-info">
                            <h3>¥ 458,600</h3>
                            <p>本月总收入</p>
                        </div>
                        <div class="stat-icon"><i class="fas fa-chart-line"></i></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-info">
                            <h3>¥ 126,300</h3>
                            <p>待结算金额</p>
                        </div>
                        <div class="stat-icon"><i class="fas fa-clock"></i></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-info">
                            <h3>15</h3>
                            <p>逾期未付</p>
                        </div>
                        <div class="stat-icon"><i class="fas fa-exclamation-triangle"></i></div>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-header">
                        <h4>费用结算中心</h4>
                        <div>
                            <button class="btn btn-outline" onclick="showModal('billFilter')"><i class="fas fa-filter"></i> 筛选</button>
                            <button class="btn btn-primary"><i class="fas fa-file-export"></i> 导出月度报表</button>
                            <button class="btn btn-primary" onclick="showModal('addBill')"><i class="fas fa-plus"></i> 新建账单</button>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>账单编号</th>
                                <th>客户名称</th>
                                <th>关联订单/航次</th>
                                <th>租赁费用</th>
                                <th>维修/赔偿费</th>
                                <th>总金额</th>
                                <th>状态</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>BILL-20231001</td>
                                <td>长宏海运</td>
                                <td>ORD-2023102401</td>
                                <td>¥ 12,000.00</td>
                                <td>¥ 0.00</td>
                                <td><strong>¥ 12,000.00</strong></td>
                                <td><span class="badge badge-info">待确认</span></td>
                                <td>
                                    <button class="btn btn-outline" style="padding: 4px 8px; font-size: 12px;" onclick="showModal('billDetail')">详情</button>
                                    <button class="btn btn-outline" style="padding: 4px 8px; font-size: 12px;">发送账单</button>
                                </td>
                            </tr>
                            <tr>
                                <td>BILL-20230988</td>
                                <td>远洋荣耀</td>
                                <td>ORD-2023091201</td>
                                <td>¥ 45,000.00</td>
                                <td>¥ 2,500.00</td>
                                <td><strong>¥ 47,500.00</strong></td>
                                <td><span class="badge badge-success">已结清</span></td>
                                <td>
                                    <button class="btn btn-outline" style="padding: 4px 8px; font-size: 12px;" onclick="showModal('billDetail')">详情</button>
                                    <button class="btn btn-outline" style="padding: 4px 8px; font-size: 12px;">查看发票</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div style="margin-top: 15px; display: flex; justify-content: space-between; align-items: center;">
                        <span style="color: #666; font-size: 14px;">显示 1-10 / 共 45 条</span>
                        <div class="pagination">
                            <button class="btn btn-outline" style="padding: 5px 10px;">上一页</button>
                            <button class="btn btn-outline active" style="padding: 5px 10px;">1</button>
                            <button class="btn btn-outline" style="padding: 5px 10px;">2</button>
                            <button class="btn btn-outline" style="padding: 5px 10px;">3</button>
                            <button class="btn btn-outline" style="padding: 5px 10px;">下一页</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="settings" class="module-section">
                <div class="dashboard-grid" style="grid-template-columns: 1fr 1fr; gap: 20px;">
                    
                    <!-- 数据库管理 -->
                    <div class="table-container">
                        <h4 style="margin-bottom: 15px; color: var(--primary-color);"><i class="fas fa-database"></i> 数据库管理</h4>
                        <div style="margin-bottom: 15px;">
                            <button class="btn btn-primary" onclick="showModal('viewManager')"><i class="fas fa-eye"></i> 视图管理</button>
                            <button class="btn btn-primary" onclick="showModal('triggerManager')"><i class="fas fa-bolt"></i> 触发器管理</button>
                            <button class="btn btn-outline" onclick="showModal('procedureManager')"><i class="fas fa-cogs"></i> 存储过程</button>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>对象类型</th>
                                    <th>名称</th>
                                    <th>状态</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="badge badge-info">视图</span></td>
                                    <td>v_equipment_status</td>
                                    <td><span class="badge badge-success">活动</span></td>
                                    <td><a href="#" onclick="showModal('viewDetail')">查看</a> | <a href="#">编辑</a></td>
                                </tr>
                                <tr>
                                    <td><span class="badge badge-warning">触发器</span></td>
                                    <td>trg_update_inventory</td>
                                    <td><span class="badge badge-success">活动</span></td>
                                    <td><a href="#" onclick="showModal('triggerDetail')">查看</a> | <a href="#">编辑</a></td>
                                </tr>
                                <tr>
                                    <td><span class="badge badge-info">视图</span></td>
                                    <td>v_financial_report</td>
                                    <td><span class="badge badge-success">活动</span></td>
                                    <td><a href="#" onclick="showModal('viewDetail')">查看</a> | <a href="#">编辑</a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- 用户权限管理 -->
                    <div class="table-container">
                        <h4 style="margin-bottom: 15px; color: var(--primary-color);"><i class="fas fa-users-cog"></i> 用户权限管理</h4>
                        <div style="margin-bottom: 15px;">
                            <button class="btn btn-primary" onclick="showModal('addUser')"><i class="fas fa-user-plus"></i> 添加用户</button>
                            <button class="btn btn-outline" onclick="showModal('roleManager')"><i class="fas fa-shield-alt"></i> 角色配置</button>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>用户名</th>
                                    <th>角色</th>
                                    <th>状态</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>张工</td>
                                    <td><span class="badge badge-danger">管理员</span></td>
                                    <td><span class="badge badge-success">在线</span></td>
                                    <td><a href="#" onclick="showModal('userDetail')">详情</a> | <a href="#">编辑</a></td>
                                </tr>
                                <tr>
                                    <td>李仓管</td>
                                    <td><span class="badge badge-info">仓库管理</span></td>
                                    <td><span class="badge badge-success">在线</span></td>
                                    <td><a href="#" onclick="showModal('userDetail')">详情</a> | <a href="#">编辑</a></td>
                                </tr>
                                <tr>
                                    <td>王财务</td>
                                    <td><span class="badge badge-warning">财务</span></td>
                                    <td><span style="color: #999;">离线</span></td>
                                    <td><a href="#" onclick="showModal('userDetail')">详情</a> | <a href="#">编辑</a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- 系统日志 -->
                    <div class="table-container">
                        <h4 style="margin-bottom: 15px; color: var(--primary-color);"><i class="fas fa-clipboard-list"></i> 系统操作日志</h4>
                        <div style="margin-bottom: 15px;">
                            <button class="btn btn-outline" onclick="showModal('logFilter')"><i class="fas fa-filter"></i> 筛选日志</button>
                            <button class="btn btn-outline"><i class="fas fa-download"></i> 导出日志</button>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>时间</th>
                                    <th>操作员</th>
                                    <th>操作类型</th>
                                    <th>描述</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2023-10-25 14:32</td>
                                    <td>张工</td>
                                    <td><span class="badge badge-info">新增</span></td>
                                    <td>创建租赁订单 ORD-2023102401</td>
                                </tr>
                                <tr>
                                    <td>2023-10-25 14:15</td>
                                    <td>李仓管</td>
                                    <td><span class="badge badge-warning">修改</span></td>
                                    <td>更新设备状态 EQ-2023001</td>
                                </tr>
                                <tr>
                                    <td>2023-10-25 13:58</td>
                                    <td>王财务</td>
                                    <td><span class="badge badge-success">查询</span></td>
                                    <td>导出月度财务报表</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- 数据统计 -->
                    <div class="table-container">
                        <h4 style="margin-bottom: 15px; color: var(--primary-color);"><i class="fas fa-chart-bar"></i> 数据统计与报表</h4>
                        <div style="margin-bottom: 15px;">
                            <button class="btn btn-primary" onclick="showModal('reportConfig')"><i class="fas fa-chart-pie"></i> 生成报表</button>
                            <button class="btn btn-outline" onclick="showModal('chartView')"><i class="fas fa-chart-line"></i> 数据可视化</button>
                            <button class="btn btn-outline" onclick="showModal('databaseSchema')"><i class="fas fa-database"></i> 查看数据库架构</button>
                        </div>
                        <div style="padding: 20px; background: #f8f9fa; border-radius: 4px;">
                            <p style="margin-bottom: 10px;"><strong>数据库连接查询示例：</strong></p>
                            <ul style="list-style: none; padding-left: 0; font-size: 13px; color: #666;">
                                <li style="margin-bottom: 8px;">✓ 设备-租赁订单关联查询 (JOIN 3张表)</li>
                                <li style="margin-bottom: 8px;">✓ 客户-账单-付款记录多表联查 (LEFT JOIN)</li>
                                <li style="margin-bottom: 8px;">✓ 库存统计聚合视图 (GROUP BY + COUNT)</li>
                                <li style="margin-bottom: 8px;">✓ 设备使用频率分析 (子查询 + 排序)</li>
                                <li style="margin-bottom: 8px;">✓ 收入趋势时间序列查询 (DATE函数 + SUM)</li>
                                <li style="margin-bottom: 8px;">✓ 库存预警自动触发 (触发器 + 条件判断)</li>
                            </ul>
                        </div>
                    </div>

                </div>

                <!-- 数据库架构展示 -->
                <div class="table-container" style="margin-top: 20px;">
                    <div class="table-header">
                        <h4><i class="fas fa-project-diagram"></i> 核心数据库表结构一览</h4>
                        <button class="btn btn-outline" onclick="showModal('databaseSchema')"><i class="fas fa-expand"></i> 查看完整ER图</button>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; padding: 15px 0;">
                        <div style="padding: 15px; background: #f8f9fa; border-left: 4px solid var(--primary-color); border-radius: 4px;">
                            <h5 style="margin-bottom: 10px; color: var(--primary-color);"><i class="fas fa-table"></i> equipment (设备表)</h5>
                            <ul style="font-size: 12px; color: #666; list-style: none; padding: 0;">
                                <li>• equipment_id (PK)</li>
                                <li>• equipment_name</li>
                                <li>• category</li>
                                <li>• status</li>
                                <li>• storage_location</li>
                                <li>• created_at</li>
                            </ul>
                        </div>
                        <div style="padding: 15px; background: #f8f9fa; border-left: 4px solid var(--accent-color); border-radius: 4px;">
                            <h5 style="margin-bottom: 10px; color: var(--accent-color);"><i class="fas fa-table"></i> lease_orders (租赁订单)</h5>
                            <ul style="font-size: 12px; color: #666; list-style: none; padding: 0;">
                                <li>• order_id (PK)</li>
                                <li>• customer_name</li>
                                <li>• voyage_no</li>
                                <li>• start_date</li>
                                <li>• return_date</li>
                                <li>• status</li>
                            </ul>
                        </div>
                        <div style="padding: 15px; background: #f8f9fa; border-left: 4px solid var(--warning); border-radius: 4px;">
                            <h5 style="margin-bottom: 10px; color: var(--warning);"><i class="fas fa-table"></i> billing (账单表)</h5>
                            <ul style="font-size: 12px; color: #666; list-style: none; padding: 0;">
                                <li>• bill_id (PK)</li>
                                <li>• order_id (FK)</li>
                                <li>• customer_name</li>
                                <li>• amount</li>
                                <li>• repair_fee</li>
                                <li>• status</li>
                            </ul>
                        </div>
                        <div style="padding: 15px; background: #f8f9fa; border-left: 4px solid var(--success); border-radius: 4px;">
                            <h5 style="margin-bottom: 10px; color: var(--success);"><i class="fas fa-table"></i> order_items (订单明细)</h5>
                            <ul style="font-size: 12px; color: #666; list-style: none; padding: 0;">
                                <li>• item_id (PK)</li>
                                <li>• order_id (FK)</li>
                                <li>• equipment_id (FK)</li>
                                <li>• daily_rate</li>
                                <li>• days</li>
                            </ul>
                        </div>
                        <div style="padding: 15px; background: #f8f9fa; border-left: 4px solid var(--danger); border-radius: 4px;">
                            <h5 style="margin-bottom: 10px; color: var(--danger);"><i class="fas fa-table"></i> inspection_records (质检)</h5>
                            <ul style="font-size: 12px; color: #666; list-style: none; padding: 0;">
                                <li>• inspection_id (PK)</li>
                                <li>• equipment_id (FK)</li>
                                <li>• inspector</li>
                                <li>• appearance</li>
                                <li>• function_test</li>
                                <li>• result</li>
                            </ul>
                        </div>
                        <div style="padding: 15px; background: #f8f9fa; border-left: 4px solid #6c757d; border-radius: 4px;">
                            <h5 style="margin-bottom: 10px; color: #6c757d;"><i class="fas fa-table"></i> operation_logs (日志)</h5>
                            <ul style="font-size: 12px; color: #666; list-style: none; padding: 0;">
                                <li>• log_id (PK)</li>
                                <li>• user_id</li>
                                <li>• action</li>
                                <li>• description</li>
                                <li>• created_at</li>
                            </ul>
                        </div>
                    </div>
                    <p style="margin-top: 10px; padding: 10px; background: #e7f3ff; border-radius: 4px; font-size: 13px;">
                        <i class="fas fa-info-circle"></i> <strong>数据库关系：</strong>
                        equipment ←→ order_items ←→ lease_orders ←→ billing | 
                        equipment → inspection_records | 
                        所有表 → operation_logs (日志记录)
                    </p>
                </div>
            </div>

        </div>
    </div>

    <!-- 模态框组件 -->
    <div id="modalOverlay" class="modal-overlay" onclick="closeModal()"></div>

    <!-- 添加设备模态框 -->
    <div id="addEquipment" class="modal">
        <div class="modal-header">
            <h3><i class="fas fa-plus-circle"></i> 新设备入库</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label>设备编号 <span style="color: red;">*</span></label>
                <input type="text" class="form-control" placeholder="自动生成或手动输入">
            </div>
            <div class="form-group">
                <label>设备名称/型号 <span style="color: red;">*</span></label>
                <input type="text" class="form-control" placeholder="例：门座式起重机配件包">
            </div>
            <div class="form-row">
                <div class="form-group" style="flex: 1;">
                    <label>设备类别</label>
                    <select class="form-control">
                        <option>起重配件</option>
                        <option>流体设备</option>
                        <option>固缚索具</option>
                        <option>装卸工具</option>
                    </select>
                </div>
                <div class="form-group" style="flex: 1;">
                    <label>库位分配</label>
                    <select class="form-control">
                        <option>A区-01-04</option>
                        <option>B区-02-11</option>
                        <option>C区-03-08</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label>采购价格 (元)</label>
                <input type="number" class="form-control" placeholder="0.00">
            </div>
            <div class="form-group">
                <label>备注信息</label>
                <textarea class="form-control" rows="3" placeholder="设备详细说明..."></textarea>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">取消</button>
            <button class="btn btn-primary" onclick="closeModal(); alert('设备添加成功！')">确认入库</button>
        </div>
    </div>

    <!-- 设备详情模态框 -->
    <div id="equipmentDetail" class="modal">
        <div class="modal-header">
            <h3><i class="fas fa-info-circle"></i> 设备详情</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div class="detail-section">
                <h4>基本信息</h4>
                <div class="detail-row">
                    <span class="detail-label">设备编号：</span>
                    <span>CR-5001</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">设备名称：</span>
                    <span>门座式起重机配件包</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">设备类别：</span>
                    <span>起重配件</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">当前状态：</span>
                    <span class="badge badge-success">在库</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">存放库位：</span>
                    <span>A区-01-04</span>
                </div>
            </div>
            <div class="detail-section">
                <h4>使用历史 (关联查询)</h4>
                <table style="font-size: 13px;">
                    <thead>
                        <tr>
                            <th>租赁时间</th>
                            <th>客户</th>
                            <th>归还时间</th>
                            <th>状态</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>2023-08-15</td>
                            <td>长宏海运</td>
                            <td>2023-09-20</td>
                            <td><span class="badge badge-success">已归还</span></td>
                        </tr>
                        <tr>
                            <td>2023-07-01</td>
                            <td>远洋荣耀</td>
                            <td>2023-07-25</td>
                            <td><span class="badge badge-success">已归还</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">关闭</button>
            <button class="btn btn-primary">编辑信息</button>
        </div>
    </div>

    <!-- 视图管理模态框 -->
    <div id="viewManager" class="modal modal-large">
        <div class="modal-header">
            <h3><i class="fas fa-eye"></i> 数据库视图管理</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div style="margin-bottom: 15px;">
                <button class="btn btn-primary" onclick="showModal('createView')"><i class="fas fa-plus"></i> 创建新视图</button>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>视图名称</th>
                        <th>描述</th>
                        <th>创建时间</th>
                        <th>状态</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>v_equipment_status</code></td>
                        <td>设备状态实时视图</td>
                        <td>2023-09-15</td>
                        <td><span class="badge badge-success">活动</span></td>
                        <td>
                            <a href="#" onclick="showModal('viewDetail')">查看SQL</a> | 
                            <a href="#">编辑</a> | 
                            <a href="#" style="color: red;">删除</a>
                        </td>
                    </tr>
                    <tr>
                        <td><code>v_financial_report</code></td>
                        <td>财务统计报表视图</td>
                        <td>2023-09-20</td>
                        <td><span class="badge badge-success">活动</span></td>
                        <td>
                            <a href="#" onclick="showModal('viewDetail')">查看SQL</a> | 
                            <a href="#">编辑</a> | 
                            <a href="#" style="color: red;">删除</a>
                        </td>
                    </tr>
                    <tr>
                        <td><code>v_lease_detail</code></td>
                        <td>租赁订单详情联查视图</td>
                        <td>2023-10-01</td>
                        <td><span class="badge badge-success">活动</span></td>
                        <td>
                            <a href="#" onclick="showModal('viewDetail')">查看SQL</a> | 
                            <a href="#">编辑</a> | 
                            <a href="#" style="color: red;">删除</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">关闭</button>
        </div>
    </div>

    <!-- 视图详情模态框 -->
    <div id="viewDetail" class="modal modal-large">
        <div class="modal-header">
            <h3><i class="fas fa-code"></i> 视图定义：v_equipment_status</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <p style="color: #666; margin-bottom: 10px;">该视图通过多表连接查询，实时展示设备状态、库位及租赁信息</p>
            <div class="code-block">
<pre>CREATE VIEW v_equipment_status AS
SELECT 
    e.equipment_id,
    e.equipment_name,
    e.category,
    e.storage_location,
    e.status,
    l.lease_id,
    l.customer_name,
    l.voyage_no,
    l.start_date,
    l.return_date
FROM equipment e
LEFT JOIN lease_orders l ON e.equipment_id = l.equipment_id
WHERE e.is_deleted = 0
ORDER BY e.created_at DESC;</pre>
            </div>
            <p style="margin-top: 15px; color: #666;"><strong>使用场景：</strong>工作台设备快速查询、租赁状态实时监控</p>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">关闭</button>
            <button class="btn btn-primary">编辑视图</button>
        </div>
    </div>

    <!-- 触发器管理模态框 -->
    <div id="triggerManager" class="modal modal-large">
        <div class="modal-header">
            <h3><i class="fas fa-bolt"></i> 数据库触发器管理</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div style="margin-bottom: 15px;">
                <button class="btn btn-primary" onclick="showModal('createTrigger')"><i class="fas fa-plus"></i> 创建新触发器</button>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>触发器名称</th>
                        <th>触发表</th>
                        <th>触发事件</th>
                        <th>触发时机</th>
                        <th>状态</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>trg_update_inventory</code></td>
                        <td>lease_orders</td>
                        <td>INSERT</td>
                        <td>AFTER</td>
                        <td><span class="badge badge-success">启用</span></td>
                        <td>
                            <a href="#" onclick="showModal('triggerDetail')">查看</a> | 
                            <a href="#">编辑</a> | 
                            <a href="#">禁用</a>
                        </td>
                    </tr>
                    <tr>
                        <td><code>trg_auto_billing</code></td>
                        <td>return_records</td>
                        <td>UPDATE</td>
                        <td>AFTER</td>
                        <td><span class="badge badge-success">启用</span></td>
                        <td>
                            <a href="#" onclick="showModal('triggerDetail')">查看</a> | 
                            <a href="#">编辑</a> | 
                            <a href="#">禁用</a>
                        </td>
                    </tr>
                    <tr>
                        <td><code>trg_log_changes</code></td>
                        <td>equipment</td>
                        <td>UPDATE</td>
                        <td>BEFORE</td>
                        <td><span class="badge badge-success">启用</span></td>
                        <td>
                            <a href="#" onclick="showModal('triggerDetail')">查看</a> | 
                            <a href="#">编辑</a> | 
                            <a href="#">禁用</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">关闭</button>
        </div>
    </div>

    <!-- 触发器详情模态框 -->
    <div id="triggerDetail" class="modal modal-large">
        <div class="modal-header">
            <h3><i class="fas fa-bolt"></i> 触发器定义：trg_update_inventory</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <p style="color: #666; margin-bottom: 10px;">功能：租赁订单创建后，自动更新设备库存状态为"已出库"</p>
            <div class="code-block">
<pre>CREATE TRIGGER trg_update_inventory
AFTER INSERT ON lease_orders
FOR EACH ROW
BEGIN
    -- 更新设备状态为已出库
    UPDATE equipment
    SET status = '已出库',
        updated_at = NOW()
    WHERE equipment_id = NEW.equipment_id;
    
    -- 记录操作日志
    INSERT INTO operation_logs (action, description, created_at)
    VALUES ('OUT', CONCAT('设备 ', NEW.equipment_id, ' 出库'), NOW());
END;</pre>
            </div>
            <p style="margin-top: 15px; color: #666;"><strong>触发时机：</strong>AFTER INSERT | <strong>触发表：</strong>lease_orders</p>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">关闭</button>
            <button class="btn btn-danger">禁用触发器</button>
            <button class="btn btn-primary">编辑触发器</button>
        </div>
    </div>

    <!-- 账单详情模态框 -->
    <div id="billDetail" class="modal">
        <div class="modal-header">
            <h3><i class="fas fa-file-invoice-dollar"></i> 账单详情</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div class="detail-section">
                <h4>账单基本信息</h4>
                <div class="detail-row">
                    <span class="detail-label">账单编号：</span>
                    <span>BILL-20231001</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">客户名称：</span>
                    <span>长宏海运</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">关联订单：</span>
                    <span>ORD-2023102401</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">航次号：</span>
                    <span>CH-20231024</span>
                </div>
            </div>
            <div class="detail-section">
                <h4>费用明细</h4>
                <table style="font-size: 13px;">
                    <thead>
                        <tr>
                            <th>项目</th>
                            <th>金额</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>设备租赁费（5天）</td>
                            <td>¥ 10,000.00</td>
                        </tr>
                        <tr>
                            <td>服务费</td>
                            <td>¥ 2,000.00</td>
                        </tr>
                        <tr>
                            <td>维修费</td>
                            <td>¥ 0.00</td>
                        </tr>
                        <tr style="font-weight: bold; background: #f8f9fa;">
                            <td>合计</td>
                            <td style="color: var(--primary-color);">¥ 12,000.00</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">关闭</button>
            <button class="btn btn-outline">打印账单</button>
            <button class="btn btn-primary">发送客户</button>
        </div>
    </div>

    <!-- 编辑设备模态框 -->
    <div id="editEquipment" class="modal">
        <div class="modal-header">
            <h3><i class="fas fa-edit"></i> 编辑设备信息</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label>设备编号</label>
                <input type="text" class="form-control" value="CR-5001" disabled>
            </div>
            <div class="form-group">
                <label>设备名称/型号</label>
                <input type="text" class="form-control" value="门座式起重机配件包">
            </div>
            <div class="form-row">
                <div class="form-group" style="flex: 1;">
                    <label>设备类别</label>
                    <select class="form-control">
                        <option selected>起重配件</option>
                        <option>流体设备</option>
                        <option>固缚索具</option>
                    </select>
                </div>
                <div class="form-group" style="flex: 1;">
                    <label>库位</label>
                    <select class="form-control">
                        <option selected>A区-01-04</option>
                        <option>B区-02-11</option>
                        <option>C区-03-08</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label>当前状态</label>
                <select class="form-control">
                    <option selected>在库</option>
                    <option>已出库</option>
                    <option>维修中</option>
                    <option>报废</option>
                </select>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">取消</button>
            <button class="btn btn-primary" onclick="closeModal(); simulateDatabaseOperation('update')">保存更新</button>
        </div>
    </div>

    <!-- 批量导入模态框 -->
    <div id="batchImport" class="modal">
        <div class="modal-header">
            <h3><i class="fas fa-file-upload"></i> 批量导入设备</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div style="border: 2px dashed #ddd; padding: 40px; text-align: center; border-radius: 8px; margin-bottom: 15px;">
                <i class="fas fa-cloud-upload-alt" style="font-size: 48px; color: #ddd; margin-bottom: 10px;"></i>
                <p>拖拽Excel文件到此处，或点击上传</p>
                <button class="btn btn-primary" style="margin-top: 10px;">选择文件</button>
            </div>
            <p style="font-size: 13px; color: #666;"><i class="fas fa-info-circle"></i> 支持格式：.xlsx, .xls | 
            <a href="#" style="color: var(--primary-color);">下载模板文件</a></p>
            <div style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 4px;">
                <strong>导入说明：</strong>
                <ul style="margin-top: 10px; font-size: 13px; color: #666; padding-left: 20px;">
                    <li>系统将自动验证数据格式</li>
                    <li>重复设备编号将被跳过</li>
                    <li>导入成功后将触发 trg_inventory_insert 触发器</li>
                </ul>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">取消</button>
            <button class="btn btn-primary" onclick="closeModal(); alert('批量导入成功：32条记录已插入，触发器已执行')">开始导入</button>
        </div>
    </div>

    <!-- 库存筛选模态框 -->
    <div id="inventoryFilter" class="modal">
        <div class="modal-header">
            <h3><i class="fas fa-filter"></i> 高级筛选</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label>设备类别</label>
                <select class="form-control">
                    <option>全部</option>
                    <option>起重配件</option>
                    <option>流体设备</option>
                    <option>固缚索具</option>
                    <option>液压工具</option>
                </select>
            </div>
            <div class="form-group">
                <label>库位</label>
                <select class="form-control">
                    <option>全部</option>
                    <option>A区</option>
                    <option>B区</option>
                    <option>C区</option>
                </select>
            </div>
            <div class="form-group">
                <label>状态</label>
                <div>
                    <label style="display: inline-block; margin-right: 15px; font-weight: normal;"><input type="checkbox" checked> 在库</label>
                    <label style="display: inline-block; margin-right: 15px; font-weight: normal;"><input type="checkbox"> 已出库</label>
                    <label style="display: inline-block; margin-right: 15px; font-weight: normal;"><input type="checkbox"> 维修中</label>
                </div>
            </div>
            <div class="form-group">
                <label>入库时间范围</label>
                <div class="form-row">
                    <input type="date" class="form-control" style="flex: 1;">
                    <span style="padding: 10px;">至</span>
                    <input type="date" class="form-control" style="flex: 1;">
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">重置</button>
            <button class="btn btn-primary" onclick="closeModal(); simulateDatabaseOperation('query')">应用筛选</button>
        </div>
    </div>

    <!-- 维保记录模态框 -->
    <div id="maintenanceRecord" class="modal modal-large">
        <div class="modal-header">
            <h3><i class="fas fa-tools"></i> 维保记录</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div style="margin-bottom: 15px;">
                <button class="btn btn-primary"><i class="fas fa-plus"></i> 添加维保记录</button>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>日期</th>
                        <th>维保类型</th>
                        <th>操作人员</th>
                        <th>费用</th>
                        <th>备注</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>2023-09-15</td>
                        <td><span class="badge badge-warning">定期保养</span></td>
                        <td>张师傅</td>
                        <td>¥ 500.00</td>
                        <td>更换液压油</td>
                    </tr>
                    <tr>
                        <td>2023-07-20</td>
                        <td><span class="badge badge-danger">故障维修</span></td>
                        <td>李师傅</td>
                        <td>¥ 2,500.00</td>
                        <td>更换密封圈</td>
                    </tr>
                    <tr>
                        <td>2023-05-10</td>
                        <td><span class="badge badge-success">年检</span></td>
                        <td>质检部</td>
                        <td>¥ 800.00</td>
                        <td>通过年度检测</td>
                    </tr>
                </tbody>
            </table>
            <p style="margin-top: 10px; font-size: 12px; color: #999;"><i class="fas fa-database"></i> 数据来源：maintenance_records 表 (关联查询)</p>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">关闭</button>
        </div>
    </div>

    <!-- 设备追踪模态框 -->
    <div id="trackingInfo" class="modal">
        <div class="modal-header">
            <h3><i class="fas fa-map-marker-alt"></i> 设备追踪</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div class="detail-section">
                <h4>当前位置</h4>
                <div class="detail-row">
                    <span class="detail-label">船舶：</span>
                    <span>长宏海运 - 远大号</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">航次：</span>
                    <span>CH-20231024</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">航线：</span>
                    <span>上海 → 宁波 → 深圳</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">预计归还：</span>
                    <span style="color: var(--warning);">2023-11-05</span>
                </div>
            </div>
            <div class="detail-section">
                <h4>物流轨迹</h4>
                <div style="padding-left: 20px; border-left: 3px solid var(--primary-color);">
                    <div style="margin-bottom: 15px;">
                        <p style="font-weight: bold; margin-bottom: 5px;">2023-10-20 14:30 <span class="badge badge-success">出库</span></p>
                        <p style="font-size: 13px; color: #666;">设备已从A区-01-04出库</p>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <p style="font-weight: bold; margin-bottom: 5px;">2023-10-21 08:15 <span class="badge badge-info">装船</span></p>
                        <p style="font-size: 13px; color: #666;">已装载至远大号</p>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <p style="font-weight: bold; margin-bottom: 5px;">2023-10-23 16:00 <span class="badge badge-info">在航</span></p>
                        <p style="font-size: 13px; color: #666;">航行中（当前位置：东海海域）</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">关闭</button>
            <button class="btn btn-primary">发送催还通知</button>
        </div>
    </div>

    <!-- 数据可视化大屏 -->
    <div id="chartView" class="modal modal-large">
        <div class="modal-header">
            <h3><i class="fas fa-chart-line"></i> 数据可视化大屏</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div class="dashboard-grid" style="grid-template-columns: 1fr 1fr;">
                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                    <h4 style="margin-bottom: 15px;">月度收入趋势 (连接查询)</h4>
                    <svg width="100%" height="200">
                        <polyline points="30,150 80,120 130,90 180,110 230,70 280,60 330,40" 
                            fill="none" stroke="var(--success)" stroke-width="3"/>
                        <circle cx="30" cy="150" r="4" fill="var(--success)"/>
                        <circle cx="80" cy="120" r="4" fill="var(--success)"/>
                        <circle cx="130" cy="90" r="4" fill="var(--success)"/>
                        <circle cx="180" cy="110" r="4" fill="var(--success)"/>
                        <circle cx="230" cy="70" r="4" fill="var(--success)"/>
                        <circle cx="280" cy="60" r="4" fill="var(--success)"/>
                        <circle cx="330" cy="40" r="4" fill="var(--success)"/>
                    </svg>
                    <p style="font-size: 12px; color: #666; margin-top: 10px;">
                        SQL: SELECT MONTH(date), SUM(amount) FROM billing JOIN orders USING(order_id) GROUP BY MONTH(date)
                    </p>
                </div>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                    <h4 style="margin-bottom: 15px;">设备利用率 (视图查询)</h4>
                    <div style="margin-top: 20px;">
                        <div style="margin-bottom: 15px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                <span>起重配件</span>
                                <span style="font-weight: bold;">85%</span>
                            </div>
                            <div style="height: 20px; background: #e9ecef; border-radius: 10px;">
                                <div style="width: 85%; height: 100%; background: linear-gradient(90deg, var(--success), var(--primary-color)); border-radius: 10px;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                <span>流体设备</span>
                                <span style="font-weight: bold;">72%</span>
                            </div>
                            <div style="height: 20px; background: #e9ecef; border-radius: 10px;">
                                <div style="width: 72%; height: 100%; background: linear-gradient(90deg, var(--warning), var(--accent-color)); border-radius: 10px;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                <span>固缚索具</span>
                                <span style="font-weight: bold;">58%</span>
                            </div>
                            <div style="height: 20px; background: #e9ecef; border-radius: 10px;">
                                <div style="width: 58%; height: 100%; background: linear-gradient(90deg, #ffc107, #ff9800); border-radius: 10px;"></div>
                            </div>
                        </div>
                    </div>
                    <p style="font-size: 12px; color: #666; margin-top: 10px;">数据源：v_equipment_utilization</p>
                </div>
            </div>
            <div style="margin-top: 20px; padding: 20px; background: #f8f9fa; border-radius: 8px;">
                <h4 style="margin-bottom: 15px;">数据库查询性能统计</h4>
                <table style="font-size: 13px;">
                    <thead>
                        <tr>
                            <th>查询类型</th>
                            <th>执行次数</th>
                            <th>平均响应时间</th>
                            <th>使用的索引</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>设备状态查询</td>
                            <td>1,523</td>
                            <td>12ms</td>
                            <td>idx_equipment_status</td>
                        </tr>
                        <tr>
                            <td>订单连接查询</td>
                            <td>856</td>
                            <td>28ms</td>
                            <td>idx_order_equipment</td>
                        </tr>
                        <tr>
                            <td>财务聚合查询</td>
                            <td>342</td>
                            <td>45ms</td>
                            <td>idx_billing_date</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">关闭</button>
            <button class="btn btn-primary">导出报表</button>
        </div>
    </div>

    <!-- 其他简单模态框占位 -->
    <div id="addBill" class="modal">
        <div class="modal-header"><h3>新建账单</h3><span class="modal-close" onclick="closeModal()">&times;</span></div>
        <div class="modal-body">
            <div class="form-group">
                <label>客户名称</label>
                <input type="text" class="form-control" placeholder="选择或输入客户">
            </div>
            <div class="form-group">
                <label>关联订单号</label>
                <input type="text" class="form-control" placeholder="ORD-XXXXXXXX">
            </div>
            <div class="form-group">
                <label>费用金额</label>
                <input type="number" class="form-control" placeholder="0.00">
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">取消</button>
            <button class="btn btn-primary" onclick="closeModal(); simulateDatabaseOperation('insert')">创建账单</button>
        </div>
    </div>
    <div id="billFilter" class="modal"><div class="modal-header"><h3>账单筛选</h3><span class="modal-close" onclick="closeModal()">&times;</span></div><div class="modal-body"><p>账单筛选条件设置...</p></div></div>
    <div id="addUser" class="modal"><div class="modal-header"><h3>添加用户</h3><span class="modal-close" onclick="closeModal()">&times;</span></div><div class="modal-body"><p>用户信息表单...</p></div></div>
    <div id="userDetail" class="modal"><div class="modal-header"><h3>用户详情</h3><span class="modal-close" onclick="closeModal()">&times;</span></div><div class="modal-body"><p>用户详细信息及操作日志...</p></div></div>
    <div id="roleManager" class="modal modal-large"><div class="modal-header"><h3>角色权限配置</h3><span class="modal-close" onclick="closeModal()">&times;</span></div><div class="modal-body"><p>角色权限管理（包含数据库级别权限）...</p></div></div>
    <div id="logFilter" class="modal"><div class="modal-header"><h3>日志筛选</h3><span class="modal-close" onclick="closeModal()">&times;</span></div><div class="modal-body"><p>日志筛选条件（时间、操作类型、用户等）...</p></div></div>
    <div id="reportConfig" class="modal"><div class="modal-header"><h3>报表配置</h3><span class="modal-close" onclick="closeModal()">&times;</span></div><div class="modal-body"><p>自定义报表生成配置...</p></div></div>
    <div id="procedureManager" class="modal modal-large">
        <div class="modal-header"><h3>存储过程管理</h3><span class="modal-close" onclick="closeModal()">&times;</span></div>
        <div class="modal-body">
            <table>
                <thead>
                    <tr>
                        <th>存储过程名称</th>
                        <th>参数</th>
                        <th>功能说明</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>sp_calculate_billing</code></td>
                        <td>@order_id INT</td>
                        <td>自动计算租赁费用</td>
                        <td><a href="#">查看</a> | <a href="#">执行</a></td>
                    </tr>
                    <tr>
                        <td><code>sp_batch_update_status</code></td>
                        <td>@status VARCHAR</td>
                        <td>批量更新设备状态</td>
                        <td><a href="#">查看</a> | <a href="#">执行</a></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div id="createView" class="modal modal-large">
        <div class="modal-header"><h3>创建视图</h3><span class="modal-close" onclick="closeModal()">&times;</span></div>
        <div class="modal-body">
            <div class="form-group">
                <label>视图名称</label>
                <input type="text" class="form-control" placeholder="v_your_view_name">
            </div>
            <div class="form-group">
                <label>SQL 定义</label>
                <textarea class="form-control" rows="10" placeholder="CREATE VIEW v_your_view_name AS&#10;SELECT ..."></textarea>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">取消</button>
            <button class="btn btn-primary" onclick="closeModal(); alert('视图创建成功！')">创建视图</button>
        </div>
    </div>
    <div id="createTrigger" class="modal modal-large">
        <div class="modal-header"><h3>创建触发器</h3><span class="modal-close" onclick="closeModal()">&times;</span></div>
        <div class="modal-body">
            <div class="form-row">
                <div class="form-group" style="flex: 1;">
                    <label>触发器名称</label>
                    <input type="text" class="form-control" placeholder="trg_your_trigger">
                </div>
                <div class="form-group" style="flex: 1;">
                    <label>触发表</label>
                    <input type="text" class="form-control" placeholder="table_name">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group" style="flex: 1;">
                    <label>触发事件</label>
                    <select class="form-control">
                        <option>INSERT</option>
                        <option>UPDATE</option>
                        <option>DELETE</option>
                    </select>
                </div>
                <div class="form-group" style="flex: 1;">
                    <label>触发时机</label>
                    <select class="form-control">
                        <option>BEFORE</option>
                        <option>AFTER</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label>触发器逻辑</label>
                <textarea class="form-control" rows="10" placeholder="BEGIN&#10;  -- Your trigger logic here&#10;END;"></textarea>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">取消</button>
            <button class="btn btn-primary" onclick="closeModal(); alert('触发器创建成功！')">创建触发器</button>
        </div>
    </div>

    <!-- 选配设备模态框 -->
    <div id="selectEquipment" class="modal modal-large">
        <div class="modal-header">
            <h3><i class="fas fa-tasks"></i> 选配设备</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div style="margin-bottom: 15px;">
                <input type="text" class="form-control" placeholder="搜索设备名称或编号..." style="display: inline-block; width: 300px; margin-right: 10px;">
                <select class="form-control" style="display: inline-block; width: 150px;">
                    <option>全部类别</option>
                    <option>起重配件</option>
                    <option>流体设备</option>
                    <option>固缚索具</option>
                </select>
            </div>
            <table>
                <thead>
                    <tr>
                        <th><input type="checkbox"></th>
                        <th>设备编号</th>
                        <th>设备名称</th>
                        <th>类别</th>
                        <th>库位</th>
                        <th>状态</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="checkbox" checked></td>
                        <td>CR-5001</td>
                        <td>门座式起重机配件包</td>
                        <td>起重配件</td>
                        <td>A区-01-04</td>
                        <td><span class="badge badge-success">可用</span></td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>HY-3305</td>
                        <td>液压千斤顶 (50T)</td>
                        <td>液压工具</td>
                        <td>C区-03-08</td>
                        <td><span class="badge badge-success">可用</span></td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" checked></td>
                        <td>FB-8801</td>
                        <td>钢丝绳索 (100米)</td>
                        <td>固缚索具</td>
                        <td>B区-05-12</td>
                        <td><span class="badge badge-success">可用</span></td>
                    </tr>
                </tbody>
            </table>
            <div style="margin-top: 15px; padding: 10px; background: #e7f3ff; border-left: 4px solid var(--primary-color);">
                <strong>已选择：2 件设备</strong>
                <p style="font-size: 13px; margin-top: 5px; color: #666;">系统将执行 INSERT INTO lease_order_items 并触发库存更新</p>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">取消</button>
            <button class="btn btn-primary" onclick="closeModal(); simulateDatabaseOperation('insert')">确认创建订单</button>
        </div>
    </div>

    <!-- 订单详情模态框 -->
    <div id="orderDetail" class="modal modal-large">
        <div class="modal-header">
            <h3><i class="fas fa-file-alt"></i> 订单详情</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div class="detail-section">
                <h4>订单基本信息</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div>
                        <div class="detail-row">
                            <span class="detail-label">订单号：</span>
                            <span>ORD-2023102401</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">申请单位：</span>
                            <span>太平洋航运</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">航次号：</span>
                            <span>PC-9901</span>
                        </div>
                    </div>
                    <div>
                        <div class="detail-row">
                            <span class="detail-label">起租时间：</span>
                            <span>2023-10-25</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">预计归还：</span>
                            <span>2023-11-10</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">订单状态：</span>
                            <span class="badge badge-info">待提货</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="detail-section">
                <h4>设备清单 (关联查询)</h4>
                <table style="font-size: 13px;">
                    <thead>
                        <tr>
                            <th>设备编号</th>
                            <th>设备名称</th>
                            <th>类别</th>
                            <th>原库位</th>
                            <th>租赁单价/天</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>CR-5001</td>
                            <td>门座式起重机配件包</td>
                            <td>起重配件</td>
                            <td>A区-01-04</td>
                            <td>¥ 800.00</td>
                        </tr>
                        <tr>
                            <td>FB-8801</td>
                            <td>钢丝绳索 (100米)</td>
                            <td>固缚索具</td>
                            <td>B区-05-12</td>
                            <td>¥ 120.00</td>
                        </tr>
                        <tr>
                            <td colspan="4" style="text-align: right;"><strong>预估租赁费用：</strong></td>
                            <td><strong style="color: var(--primary-color);">¥ 14,720.00</strong></td>
                        </tr>
                    </tbody>
                </table>
                <p style="margin-top: 10px; font-size: 12px; color: #999;">
                    SQL: SELECT * FROM orders o JOIN order_items oi ON o.order_id = oi.order_id JOIN equipment e ON oi.equipment_id = e.equipment_id
                </p>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">关闭</button>
            <button class="btn btn-outline">打印订单</button>
            <button class="btn btn-primary" onclick="showModal('checkoutProcess')">办理出库</button>
        </div>
    </div>

    <!-- 出库办理流程 -->
    <div id="checkoutProcess" class="modal">
        <div class="modal-header">
            <h3><i class="fas fa-truck-loading"></i> 办理出库</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div class="detail-section">
                <h4>订单信息</h4>
                <div class="detail-row">
                    <span class="detail-label">订单号：</span>
                    <span>ORD-2023102401</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">客户：</span>
                    <span>太平洋航运</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">设备数量：</span>
                    <span>12 件</span>
                </div>
            </div>
            <div class="detail-section">
                <h4>出库确认</h4>
                <div class="form-group">
                    <label>提货人姓名</label>
                    <input type="text" class="form-control" placeholder="输入提货人姓名">
                </div>
                <div class="form-group">
                    <label>联系电话</label>
                    <input type="text" class="form-control" placeholder="输入联系电话">
                </div>
                <div class="form-group">
                    <label>出库备注</label>
                    <textarea class="form-control" rows="3" placeholder="出库说明或特殊要求..."></textarea>
                </div>
                <div style="padding: 10px; background: #fff3cd; border-left: 4px solid var(--warning); margin-top: 10px;">
                    <p style="font-size: 13px; margin: 0;"><i class="fas fa-exclamation-triangle"></i> 确认出库后将触发以下操作：</p>
                    <ul style="margin: 5px 0 0 20px; font-size: 12px;">
                        <li>执行触发器：trg_update_inventory (更新设备状态为"已出库")</li>
                        <li>执行存储过程：sp_calculate_rental_fee (计算预估费用)</li>
                        <li>插入操作日志：operation_logs</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">取消</button>
            <button class="btn btn-primary" onclick="closeModal(); alert('✓ 出库成功！\n- 设备状态已更新 (触发器)\n- 预估费用已计算 (存储过程)\n- 操作日志已记录')">确认出库</button>
        </div>
    </div>

    <!-- 订单设备清单 -->
    <div id="orderEquipmentList" class="modal modal-large">
        <div class="modal-header">
            <h3><i class="fas fa-list"></i> 订单设备清单</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <table>
                <thead>
                    <tr>
                        <th>序号</th>
                        <th>设备编号</th>
                        <th>设备名称</th>
                        <th>类别</th>
                        <th>出库时间</th>
                        <th>当前状态</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>CR-5001</td>
                        <td>门座式起重机配件包</td>
                        <td>起重配件</td>
                        <td>2023-10-25 09:30</td>
                        <td><span class="badge badge-warning">租赁中</span></td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>FB-8801</td>
                        <td>钢丝绳索 (100米)</td>
                        <td>固缚索具</td>
                        <td>2023-10-25 09:30</td>
                        <td><span class="badge badge-warning">租赁中</span></td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>HY-3305</td>
                        <td>液压千斤顶 (50T)</td>
                        <td>液压工具</td>
                        <td>2023-10-25 09:30</td>
                        <td><span class="badge badge-warning">租赁中</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">关闭</button>
            <button class="btn btn-outline">导出清单</button>
        </div>
    </div>

    <!-- 租赁筛选 -->
    <div id="leaseFilter" class="modal">
        <div class="modal-header">
            <h3><i class="fas fa-filter"></i> 订单筛选</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label>订单状态</label>
                <div>
                    <label style="display: inline-block; margin-right: 15px; font-weight: normal;"><input type="checkbox" checked> 待提货</label>
                    <label style="display: inline-block; margin-right: 15px; font-weight: normal;"><input type="checkbox"> 航次执行中</label>
                    <label style="display: inline-block; margin-right: 15px; font-weight: normal;"><input type="checkbox"> 已完结</label>
                </div>
            </div>
            <div class="form-group">
                <label>客户名称</label>
                <input type="text" class="form-control" placeholder="输入客户名称">
            </div>
            <div class="form-group">
                <label>航次号</label>
                <input type="text" class="form-control" placeholder="输入航次号">
            </div>
            <div class="form-group">
                <label>起租时间范围</label>
                <div class="form-row">
                    <input type="date" class="form-control" style="flex: 1;">
                    <span style="padding: 10px;">至</span>
                    <input type="date" class="form-control" style="flex: 1;">
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">重置</button>
            <button class="btn btn-primary" onclick="closeModal(); simulateDatabaseOperation('query')">应用筛选</button>
        </div>
    </div>

    <!-- 质检面板详细 -->
    <div id="inspectionPanel" class="modal modal-large">
        <div class="modal-header">
            <h3><i class="fas fa-search"></i> 设备质检</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div class="detail-section">
                <h4>归还单信息</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div>
                        <div class="detail-row">
                            <span class="detail-label">归还单号：</span>
                            <span>RET-0091</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">来源订单：</span>
                            <span>ORD-2023091501</span>
                        </div>
                    </div>
                    <div>
                        <div class="detail-row">
                            <span class="detail-label">航次号：</span>
                            <span>V-9082</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">归还时间：</span>
                            <span>2023-10-25 10:30</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="detail-section">
                <h4>设备质检 (逐件录入)</h4>
                <table style="font-size: 13px;">
                    <thead>
                        <tr>
                            <th>设备编号</th>
                            <th>设备名称</th>
                            <th>外观</th>
                            <th>功能</th>
                            <th>需维修</th>
                            <th>维修费</th>
                            <th>状态</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>EQ-2023001</td>
                            <td>重型吊索组</td>
                            <td><select class="form-control" style="font-size: 12px; padding: 4px;"><option>完好</option><option>轻微磨损</option></select></td>
                            <td><select class="form-control" style="font-size: 12px; padding: 4px;"><option>通过</option><option>故障</option></select></td>
                            <td><input type="checkbox"></td>
                            <td><input type="number" class="form-control" placeholder="0.00" style="width: 80px; font-size: 12px; padding: 4px;"></td>
                            <td><span class="badge badge-info">待检</span></td>
                        </tr>
                        <tr>
                            <td>EQ-2023045</td>
                            <td>集装箱叉车 (3T)</td>
                            <td><select class="form-control" style="font-size: 12px; padding: 4px;"><option>完好</option></select></td>
                            <td><select class="form-control" style="font-size: 12px; padding: 4px;"><option>通过</option></select></td>
                            <td><input type="checkbox"></td>
                            <td><input type="number" class="form-control" placeholder="0.00" style="width: 80px; font-size: 12px; padding: 4px;"></td>
                            <td><span class="badge badge-info">待检</span></td>
                        </tr>
                        <tr>
                            <td>HY-3305</td>
                            <td>液压千斤顶 (50T)</td>
                            <td><select class="form-control" style="font-size: 12px; padding: 4px;"><option>完好</option></select></td>
                            <td><select class="form-control" style="font-size: 12px; padding: 4px;"><option>通过</option></select></td>
                            <td><input type="checkbox"></td>
                            <td><input type="number" class="form-control" placeholder="0.00" style="width: 80px; font-size: 12px; padding: 4px;"></td>
                            <td><span class="badge badge-info">待检</span></td>
                        </tr>
                    </tbody>
                </table>
                <div style="margin-top: 15px; padding: 10px; background: #e7f3ff; border-left: 4px solid var(--primary-color);">
                    <strong>数据库操作流程：</strong>
                    <ul style="margin: 5px 0 0 20px; font-size: 12px;">
                        <li>UPDATE equipment SET status='在库', location='原库位' WHERE equipment_id IN (...)</li>
                        <li>INSERT INTO inspection_records (设备质检记录)</li>
                        <li>触发器 trg_auto_billing 自动生成账单</li>
                        <li>触发器 trg_return_log 记录操作日志</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">取消</button>
            <button class="btn btn-outline">保存草稿</button>
            <button class="btn btn-primary" onclick="closeModal(); alert('质检完成！设备已入库，账单已生成')">完成质检并入库</button>
        </div>
    </div>

    <!-- 归还设备清单 -->
    <div id="returnEquipmentList" class="modal modal-large">
        <div class="modal-header">
            <h3><i class="fas fa-list-alt"></i> 归还设备清单</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <table>
                <thead>
                    <tr>
                        <th>设备编号</th>
                        <th>设备名称</th>
                        <th>出库时间</th>
                        <th>归还时间</th>
                        <th>租用天数</th>
                        <th>质检状态</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>EQ-2023001</td>
                        <td>重型吊索组</td>
                        <td>2023-09-15</td>
                        <td>2023-10-25</td>
                        <td>40 天</td>
                        <td><span class="badge badge-warning">待检</span></td>
                    </tr>
                    <tr>
                        <td>EQ-2023045</td>
                        <td>集装箱叉车 (3T)</td>
                        <td>2023-09-15</td>
                        <td>2023-10-25</td>
                        <td>40 天</td>
                        <td><span class="badge badge-warning">待检</span></td>
                    </tr>
                    <tr>
                        <td>HY-3305</td>
                        <td>液压千斤顶 (50T)</td>
                        <td>2023-09-15</td>
                        <td>2023-10-25</td>
                        <td>40 天</td>
                        <td><span class="badge badge-warning">待检</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">关闭</button>
        </div>
    </div>

    <!-- 质检报告 -->
    <div id="inspectionReport" class="modal">
        <div class="modal-header">
            <h3><i class="fas fa-file-alt"></i> 质检报告</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div class="detail-section">
                <h4>基本信息</h4>
                <div class="detail-row">
                    <span class="detail-label">归还单号：</span>
                    <span>RET-0085</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">设备编号：</span>
                    <span>EQ-2023078</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">设备名称：</span>
                    <span>防护栏板 (20米)</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">质检时间：</span>
                    <span>2023-10-23 10:30</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">质检员：</span>
                    <span>张质检</span>
                </div>
            </div>
            <div class="detail-section">
                <h4>质检结果</h4>
                <div class="detail-row">
                    <span class="detail-label">外观状况：</span>
                    <span><span class="badge badge-success">完好</span></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">功能测试：</span>
                    <span><span class="badge badge-success">通过</span></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">需要维修：</span>
                    <span>否</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">维修费用：</span>
                    <span>¥ 0.00</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">处理意见：</span>
                    <span>设备状况良好，可以继续使用</span>
                </div>
            </div>
            <div class="detail-section">
                <h4>入库信息</h4>
                <div class="detail-row">
                    <span class="detail-label">入库时间：</span>
                    <span>2023-10-23 11:00</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">分配库位：</span>
                    <span>A区-01-04</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">当前状态：</span>
                    <span><span class="badge badge-success">在库</span></span>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">关闭</button>
            <button class="btn btn-outline">打印报告</button>
        </div>
    </div>

    <!-- 归还筛选 -->
    <div id="returnFilter" class="modal">
        <div class="modal-header">
            <h3><i class="fas fa-filter"></i> 归还记录筛选</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label>状态</label>
                <div>
                    <label style="display: inline-block; margin-right: 15px; font-weight: normal;"><input type="checkbox" checked> 待质检</label>
                    <label style="display: inline-block; margin-right: 15px; font-weight: normal;"><input type="checkbox"> 质检中</label>
                    <label style="display: inline-block; margin-right: 15px; font-weight: normal;"><input type="checkbox"> 已入库</label>
                </div>
            </div>
            <div class="form-group">
                <label>归还时间范围</label>
                <div class="form-row">
                    <input type="date" class="form-control" style="flex: 1;">
                    <span style="padding: 10px;">至</span>
                    <input type="date" class="form-control" style="flex: 1;">
                </div>
            </div>
            <div class="form-group">
                <label>质检结果</label>
                <select class="form-control">
                    <option>全部</option>
                    <option>合格</option>
                    <option>需维修</option>
                </select>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">重置</button>
            <button class="btn btn-primary" onclick="closeModal(); simulateDatabaseOperation('query')">应用筛选</button>
        </div>
    </div>

    <!-- 归还详情 -->
    <div id="returnDetail" class="modal modal-large">
        <div class="modal-header">
            <h3><i class="fas fa-info-circle"></i> 归还详情</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div class="detail-section">
                <h4>归还单信息</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div>
                        <div class="detail-row">
                            <span class="detail-label">归还单号：</span>
                            <span>RET-0085</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">来源订单：</span>
                            <span>ORD-2023090801</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">客户：</span>
                            <span>马士基物流</span>
                        </div>
                    </div>
                    <div>
                        <div class="detail-row">
                            <span class="detail-label">航次号：</span>
                            <span>MSK-554</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">归还时间：</span>
                            <span>2023-10-23 09:15</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">状态：</span>
                            <span><span class="badge badge-success">已入库</span></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="detail-section">
                <h4>设备清单及质检结果</h4>
                <table style="font-size: 13px;">
                    <thead>
                        <tr>
                            <th>设备编号</th>
                            <th>设备名称</th>
                            <th>外观</th>
                            <th>功能</th>
                            <th>维修费</th>
                            <th>入库库位</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>EQ-2023078</td>
                            <td>防护栏板 (20米)</td>
                            <td>完好</td>
                            <td>通过</td>
                            <td>¥ 0.00</td>
                            <td>A区-01-04</td>
                        </tr>
                        <tr>
                            <td>CR-5001</td>
                            <td>门座式起重机配件包</td>
                            <td>完好</td>
                            <td>通过</td>
                            <td>¥ 0.00</td>
                            <td>A区-01-05</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="detail-section">
                <h4>费用结算</h4>
                <div class="detail-row">
                    <span class="detail-label">租赁费用：</span>
                    <span>¥ 36,800.00</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">维修费用：</span>
                    <span>¥ 0.00</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">总计：</span>
                    <span style="font-weight: bold; color: var(--primary-color);">¥ 36,800.00</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">账单状态：</span>
                    <span><span class="badge badge-success">已结清</span></span>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">关闭</button>
            <button class="btn btn-outline">查看账单</button>
        </div>
    </div>

    <!-- 数据库架构 ER 图 -->
    <div id="databaseSchema" class="modal modal-large">
        <div class="modal-header">
            <h3><i class="fas fa-project-diagram"></i> 数据库架构与ER图</h3>
            <span class="modal-close" onclick="closeModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div class="detail-section">
                <h4>系统数据库概览</h4>
                <p style="color: #666; font-size: 14px;">本系统采用关系型数据库设计，包含9张核心业务表、12个视图、8个触发器、5个存储过程</p>
            </div>
            
            <div class="detail-section">
                <h4>核心表结构及关系</h4>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; font-family: monospace; font-size: 12px;">
<pre style="margin: 0; line-height: 1.8;">
┌─────────────────────┐         ┌──────────────────────┐         ┌─────────────────────┐
│   equipment         │         │   order_items        │         │   lease_orders      │
├─────────────────────┤         ├──────────────────────┤         ├─────────────────────┤
│ equipment_id (PK)   │←───────│ equipment_id (FK)    │────────→│ order_id (PK)       │
│ equipment_name      │         │ order_id (FK)        │         │ customer_name       │
│ category            │         │ item_id (PK)         │         │ voyage_no           │
│ status              │         │ daily_rate           │         │ start_date          │
│ storage_location    │         │ rental_days          │         │ return_date         │
│ purchase_price      │         └──────────────────────┘         │ status              │
│ created_at          │                                          │ created_at          │
└─────────────────────┘                                          └─────────────────────┘
         │                                                                   │
         │                                                                   │
         ↓                                                                   ↓
┌─────────────────────┐                                          ┌─────────────────────┐
│ inspection_records  │                                          │   billing           │
├─────────────────────┤                                          ├─────────────────────┤
│ inspection_id (PK)  │                                          │ bill_id (PK)        │
│ equipment_id (FK)   │                                          │ order_id (FK)       │
│ return_id (FK)      │                                          │ customer_name       │
│ inspector           │                                          │ rental_fee          │
│ appearance          │                                          │ repair_fee          │
│ function_test       │                                          │ total_amount        │
│ repair_needed       │                                          │ status              │
│ result              │                                          │ created_at          │
└─────────────────────┘                                          └─────────────────────┘

┌─────────────────────┐         ┌──────────────────────┐         ┌─────────────────────┐
│   customers         │         │   users              │         │ operation_logs      │
├─────────────────────┤         ├──────────────────────┤         ├─────────────────────┤
│ customer_id (PK)    │         │ user_id (PK)         │         │ log_id (PK)         │
│ customer_name       │         │ username             │         │ user_id (FK)        │
│ contact_person      │         │ password_hash        │         │ action              │
│ phone               │         │ role                 │         │ table_name          │
│ address             │         │ status               │         │ description         │
│ created_at          │         │ created_at           │         │ created_at          │
└─────────────────────┘         └──────────────────────┘         └─────────────────────┘
</pre>
                </div>
            </div>

            <div class="detail-section">
                <h4>核心视图列表</h4>
                <table style="font-size: 13px;">
                    <thead>
                        <tr>
                            <th>视图名称</th>
                            <th>用途说明</th>
                            <th>涉及表</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>v_equipment_status</code></td>
                            <td>设备状态实时视图（含租赁信息）</td>
                            <td>equipment, lease_orders, order_items</td>
                        </tr>
                        <tr>
                            <td><code>v_financial_report</code></td>
                            <td>财务统计报表视图</td>
                            <td>billing, lease_orders, customers</td>
                        </tr>
                        <tr>
                            <td><code>v_lease_detail</code></td>
                            <td>租赁订单详情联查视图</td>
                            <td>lease_orders, order_items, equipment</td>
                        </tr>
                        <tr>
                            <td><code>v_return_inspection_queue</code></td>
                            <td>归还待质检队列视图</td>
                            <td>return_records, equipment, lease_orders</td>
                        </tr>
                        <tr>
                            <td><code>v_equipment_utilization</code></td>
                            <td>设备利用率统计视图</td>
                            <td>equipment, order_items (聚合查询)</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="detail-section">
                <h4>触发器列表</h4>
                <table style="font-size: 13px;">
                    <thead>
                        <tr>
                            <th>触发器名称</th>
                            <th>触发时机</th>
                            <th>功能说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>trg_update_inventory</code></td>
                            <td>AFTER INSERT on lease_orders</td>
                            <td>租赁订单创建后自动更新设备状态为"已出库"</td>
                        </tr>
                        <tr>
                            <td><code>trg_auto_billing</code></td>
                            <td>AFTER UPDATE on return_records</td>
                            <td>设备归还质检完成后自动生成账单</td>
                        </tr>
                        <tr>
                            <td><code>trg_return_complete</code></td>
                            <td>AFTER INSERT on inspection_records</td>
                            <td>质检完成后更新设备状态为"在库"并分配库位</td>
                        </tr>
                        <tr>
                            <td><code>trg_return_warning</code></td>
                            <td>定时触发 (每日)</td>
                            <td>检查即将到期设备，生成预警记录</td>
                        </tr>
                        <tr>
                            <td><code>trg_log_changes</code></td>
                            <td>BEFORE UPDATE on equipment</td>
                            <td>记录设备信息变更日志</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="detail-section">
                <h4>存储过程列表</h4>
                <table style="font-size: 13px;">
                    <thead>
                        <tr>
                            <th>存储过程名称</th>
                            <th>参数</th>
                            <th>功能说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>sp_calculate_billing</code></td>
                            <td>@order_id INT</td>
                            <td>根据订单ID计算总租赁费用（天数 × 单价）</td>
                        </tr>
                        <tr>
                            <td><code>sp_batch_update_status</code></td>
                            <td>@status VARCHAR, @ids TEXT</td>
                            <td>批量更新指定设备的状态</td>
                        </tr>
                        <tr>
                            <td><code>sp_generate_report</code></td>
                            <td>@start_date DATE, @end_date DATE</td>
                            <td>生成指定时间段的财务报表数据</td>
                        </tr>
                        <tr>
                            <td><code>sp_equipment_maintenance</code></td>
                            <td>@equipment_id INT</td>
                            <td>记录设备维保信息并更新状态</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div style="padding: 15px; background: #e7f3ff; border-left: 4px solid var(--primary-color); border-radius: 4px;">
                <h5 style="margin-bottom: 10px;"><i class="fas fa-lightbulb"></i> 数据库优化措施</h5>
                <ul style="font-size: 13px; color: #666;">
                    <li><strong>索引优化：</strong>在 equipment_id, order_id, status, created_at 等高频查询字段建立索引</li>
                    <li><strong>分区策略：</strong>operation_logs 表按月份分区，提高历史数据查询效率</li>
                    <li><strong>缓存机制：</strong>常用视图结果缓存，减少复杂联表查询次数</li>
                    <li><strong>定期归档：</strong>超过2年的历史订单数据归档至历史库</li>
                    <li><strong>事务控制：</strong>关键业务操作（出库、归还、结算）使用事务确保数据一致性</li>
                </ul>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeModal()">关闭</button>
            <button class="btn btn-outline">导出SQL脚本</button>
            <button class="btn btn-primary">查看完整数据字典</button>
        </div>
    </div>

    <script>
        // 简单的标签页切换逻辑
        function showModule(moduleId, element) {
            // 1. 隐藏所有内容区域
            const sections = document.querySelectorAll('.module-section');
            sections.forEach(sec => sec.classList.remove('active'));

            // 2. 显示选中的内容区域
            const activeSection = document.getElementById(moduleId);
            if(activeSection) {
                activeSection.classList.add('active');
            }

            // 3. 更新菜单激活状态
            const menuItems = document.querySelectorAll('.menu-item');
            menuItems.forEach(item => item.classList.remove('active'));
            element.classList.add('active');

            // 4. 更新顶部标题
            const titles = {
                'dashboard': '工作台概览',
                'inventory': '仓储与库存管理',
                'leasing': '租赁作业与出库',
                'return': '设备归还与质检',
                'finance': '财务费用结算',
                'settings': '系统设置'
            };
            document.getElementById('header-title').innerText = titles[moduleId] || '系统';
        }

        // 模态框管理
        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            const overlay = document.getElementById('modalOverlay');
            if(modal) {
                modal.classList.add('active');
                overlay.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        function closeModal() {
            const modals = document.querySelectorAll('.modal');
            const overlay = document.getElementById('modalOverlay');
            modals.forEach(modal => modal.classList.remove('active'));
            overlay.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // 键盘ESC关闭模态框
        document.addEventListener('keydown', function(e) {
            if(e.key === 'Escape') {
                closeModal();
            }
        });

        // 模拟数据库操作演示
        function simulateDatabaseOperation(operation) {
            const messages = {
                'insert': '✓ 数据插入成功！触发器已自动更新相关表。',
                'update': '✓ 数据更新成功！视图已自动刷新。',
                'delete': '✓ 数据删除成功！关联记录已级联处理。',
                'query': '✓ 连接查询执行完成，已返回 156 条结果。'
            };
            alert(messages[operation] || '操作完成！');
        }
    </script>
</body>
</html>